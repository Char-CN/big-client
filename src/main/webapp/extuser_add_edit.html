<script>
    $(function () {
        //接受传参
        var queryString = "${queryString}";
        // 当前窗口id
        var windowId = "${windowId}";
        //当前窗口dom对象
        var this_window = $("#" + windowId);
        //获取参数
        var id = $util.getQueryString(queryString, "id");
        var phoneNumber = $util.getQueryString(queryString, "phoneNumber");
        var investmentAdviser = $util.getQueryString(queryString, "investmentAdviser");
        var userName = $util.getQueryString(queryString, "userName");
        var ifRegister = $util.getQueryString(queryString, "ifRegister");
        var registerDate = $util.getQueryString(queryString, "registerDate");
        var ifRealName = $util.getQueryString(queryString, "ifRealName");
        var ifBindCard = $util.getQueryString(queryString, "ifBindCard");
        var ifTransaction = $util.getQueryString(queryString, "ifTransaction");
        var referrer = $util.getQueryString(queryString, "referrer");
        //回显数据
        if (id != null) {
            this_window.find("input[name=phoneNumber]").val(phoneNumber);
            this_window.find("input[name=investmentAdviser]").val(investmentAdviser);
            this_window.find("input[name=userName]").val(userName);
            this_window.find("input[name=ifRegister][value='" + ifRegister + "']").attr("checked", true);
            this_window.find("input[name=registerDate]").val(registerDate);
            this_window.find("input[name=ifRealName][value='" + ifRealName + "']").attr("checked", true);
            this_window.find("input[name=ifBindCard][value='" + ifBindCard + "']").attr("checked", true);
            this_window.find("input[name=ifTransaction][value='" + ifTransaction + "']").attr("checked", true);
            this_window.find("input[name=referrer]").val(referrer);
        }

        /**
         * 触发保存按钮
         */
        $util.modalOnSave(windowId, function () {
            $.post("user/ext/addOneUser.do", {
                id: id,
                phoneNumber: this_window.find("input[name=phoneNumber]").val(),
                investmentAdviser: this_window.find("input[name=investmentAdviser]").val(),
                userName: this_window.find("input[name=userName]").val(),
                ifRegister: this_window.find("input[name=ifRegister]:checked").val(),
                registerDate: this_window.find("input[name=registerDate]").val(),
                ifRealName: this_window.find("input[name=ifRealName]:checked").val(),
                ifBindCard: this_window.find("input[name=ifBindCard]:checked").val(),
                ifTransaction: this_window.find("input[name=ifTransaction]:checked").val(),
                referrer: this_window.find("input[name=referrer]").val(),
            }, function (data) {
                if (data.code == 1) {
                    //保存成功，关闭当前窗口
                    $util.modalOnClose(windowId);
                }
                alert(data.msg);
            });
        });

    });
    //   Date 插件   start
    $('#ca').calendar({
        width: 320,
        height: 320,
        data: [
            {
                date: '2015/12/24',
                value: 'Christmas Eve'
            },
            {
                date: '2015/12/25',
                value: 'Merry Christmas'
            },
            {
                date: '2016/01/01',
                value: 'Happy New Year'
            }
        ],
        onSelected: function (view, date, data) {
        }
    });
    function createDate(event) {
        $("<div id='da'></div>").calendar({
            trigger: $(event),
            zIndex: 999,
            format: 'yyyy-mm-dd'
        }).appendTo($("body"));
    }
</script>


<!--
id: rst[i].id,
phoneNumber: rst[i].phoneNumber,
investmentAdviser: rst[i].investmentAdviser,
userName: rst[i].userName,
ifRegister: rst[i].ifRegister,
registerDate: rst[i].registerDate,
ifRealName: rst[i].ifRealName,
ifBindCard: rst[i].ifBindCard,
ifTransaction: rst[i].ifTransaction,
referrer: rst[i].referrer
-->


<div class="input-group">
    <span class="input-group-addon">手机号码</span>
    <input type="text" class="form-control" name="phoneNumber" placeholder="请输入手机号码">
</div>
<div class="input-group">
    <span class="input-group-addon">投资顾问</span>
    <input type="text" class="form-control" name="investmentAdviser" placeholder="请输入投资顾问">
</div>
<div class="input-group">
    <span class="input-group-addon">客户姓名</span>
    <input type="text" class="form-control" name="userName" placeholder="请输入系统内姓名">
</div>
<div class="input-group">
    <span class="input-group-addon">扫码推荐人</span>
    <input type="text" class="form-control" name="referrer" placeholder="请输入扫码推荐人姓名">
</div>
<div class="input-group">
    <span class="input-group-addon">注册日期</span>
    <input type="text" class="form-control" name="registerDate" onclick="createDate(this)" onfocus="createDate(this)"
           placeholder="请选择注册日期">
</div>
<!--<div class="input-group">-->
    <!--<span class="input-group-addon">返利失效日期</span>-->
    <!--<input type="text" class="form-control" name="sysRebateExpirationDate" onclick="createDate(this)"-->
           <!--onfocus="createDate(this)" placeholder="请选择返利失效日期">-->
<!--</div>-->
<div class="input-group">
    <span class="input-group-addon">是否注册</span>
    <label class="radio-inline">
        <input type="radio" name="ifRegister" value="是" checked> 是
    </label>
    <label class="radio-inline">
        <input type="radio" name="ifRegister" value="否"> 否
    </label>
</div>
<div class="input-group">
    <span class="input-group-addon">是否实名</span>
    <label class="radio-inline">
        <input type="radio" name="ifRealName" value="是" checked> 是
    </label>
    <label class="radio-inline">
        <input type="radio" name="ifRealName" value="否"> 否
    </label>
</div>
<div class="input-group">
    <span class="input-group-addon">是否绑卡</span>
    <label class="radio-inline">
        <input type="radio" name="ifBindCard" value="是" checked> 是
    </label>
    <label class="radio-inline">
        <input type="radio" name="ifBindCard" value="否"> 否
    </label>
</div>
<div class="input-group">
    <span class="input-group-addon">是否有过交易</span>
    <label class="radio-inline">
        <input type="radio" name="ifTransaction" value="是" checked> 是
    </label>
    <label class="radio-inline">
        <input type="radio" name="ifTransaction" value="否"> 否
    </label>
</div>
