
<script>
    $(function () {
        //接受传参
        var queryString = "${queryString}";
        // 当前窗口id
        var windowId = "${windowId}";
        //当前窗口dom对象
        var this_window = $("#" + windowId);
        //获取参数
        var id = $util.getQueryString(queryString, "id");
        var phoneNumber = $util.getQueryString(queryString, "phoneNumber");
        var sysName = $util.getQueryString(queryString, "sysName");
        var sysIfRegister = $util.getQueryString(queryString, "sysIfRegister");
        var sysRegisterDate = $util.getQueryString(queryString, "sysRegisterDate");
        var sysIfRealName = $util.getQueryString(queryString, "sysIfRealName");
        var sysIfBindCard = $util.getQueryString(queryString, "sysIfBindCard");
        var sysIfTransaction = $util.getQueryString(queryString, "sysIfTransaction");
        var sysReferrer = $util.getQueryString(queryString, "sysReferrer");
        var sysRebateExpirationDate = $util.getQueryString(queryString, "sysRebateExpirationDate");
        //获取input的标签对象
        var _phoneNumber = this_window.find("input[name=phoneNumber]");
        var _sysName = this_window.find("input[name=sysName]");
        var _sysIfRegister = this_window.find("input[name=sysIfRegister]");
        var _sysRegisterDate = this_window.find("input[name=sysRegisterDate]");
        var _sysIfRealName = this_window.find("input[name=sysIfRealName]");
        var _sysIfBindCard = this_window.find("input[name=sysIfBindCard]");
        var _sysIfTransaction = this_window.find("input[name=sysIfTransaction]");
        var _sysReferrer = this_window.find("input[name=sysReferrer]");
        var _sysRebateExpirationDate = this_window.find("input[name=sysRebateExpirationDate]");
//        console.log(_phoneNumber);
        //回显数据
        if (id != null) {
            _phoneNumber.val(phoneNumber);
            _sysName.val(sysName);
            if (sysIfRegister == "否") {
                this_window.find('#sysIfRegister2').attr("checked","checked");
//                this_window.find('#sysIfRegister1').removeAttr("checked");
            }
            _sysIfRegister.val(sysIfRegister);
            _sysRegisterDate.val(sysRegisterDate);
            if (sysIfRealName == "否") {
                this_window.find('#sysIfRealName2').attr("checked","checked");
//                this_window.find('#sysIfRealName1').removeAttr("checked");
            }
            _sysIfRealName.val(sysIfRealName);
            if (sysIfBindCard == "否") {
                this_window.find('#sysIfBindCard2').attr("checked","checked");
//                this_window.find('#sysIfBindCard1').removeAttr("checked");
            }
            _sysIfBindCard.val(sysIfBindCard);
            if (sysIfTransaction == "否") {
                this_window.find('#sysIfTransaction2').attr("checked","checked");
//                this_window.find('#sysIfTransaction1').removeAttr("checked");
            }
            _sysIfTransaction.val(sysIfTransaction);
            _sysReferrer.val(sysReferrer);
            _sysRebateExpirationDate.val(sysRebateExpirationDate);
        }

        /**
         * 触发保存按钮
         */
        $util.modalOnSave(windowId, function () {
            $.post("ext/addOneUser.do", {
                id: id,
                phoneNumber: _phoneNumber.val(),
                sysName: _sysName.val(),
                sysIfRegister: _sysIfRegister.val(),
                sysRegisterDate: _sysRegisterDate.val(),
                sysIfRealName: _sysIfRealName.val(),
                sysIfBindCard: _sysIfBindCard.val(),
                sysIfTransaction: _sysIfTransaction.val(),
                sysReferrer: _sysReferrer.val(),
                sysRebateExpirationDate: _sysRebateExpirationDate.val()
            }, function (data) {
                alert(data.msg);
            });
        });

    });
    //   Date 插件   start
    $('#ca').calendar({
        width: 320,
        height: 320,
        data: [
            {
                date: '2015/12/24',
                value: 'Christmas Eve'
            },
            {
                date: '2015/12/25',
                value: 'Merry Christmas'
            },
            {
                date: '2016/01/01',
                value: 'Happy New Year'
            }
        ],
        onSelected: function (view, date, data) {
        }
    });
    function createDate(event) {
        $("<div id='da'></div>").calendar({
            trigger: $(event),
            zIndex: 999,
            format: 'yyyy-mm-dd'
        }).appendTo($("body"));
    }
</script>


<div class="input-group">
    <span class="input-group-addon">手机号码</span>
    <input type="text" class="form-control" name="phoneNumber" placeholder="请输入手机号码">
</div>
<div class="input-group">
    <span class="input-group-addon">系统姓名</span>
    <input type="text" class="form-control" name="sysName" placeholder="请输入系统内姓名">
</div>
<div class="input-group">
    <span class="input-group-addon">扫码推荐人</span>
    <input type="text" class="form-control" name="sysReferrer" placeholder="请输入扫码推荐人姓名">
</div>
<div class="input-group">
    <span class="input-group-addon">注册日期</span>
    <input type="text" class="form-control" name="sysRegisterDate" onclick="createDate(this)" onfocus="createDate(this)"  placeholder="请选择注册日期">
</div>
<div class="input-group">
    <span class="input-group-addon">返利失效日期</span>
    <input type="text" class="form-control" name="sysRebateExpirationDate" onclick="createDate(this)" onfocus="createDate(this)"  placeholder="请选择返利失效日期">
</div>
<div class="input-group">
    <span class="input-group-addon">是否注册</span>
    <label class="radio-inline">
        <input type="radio" name="sysIfRegister" id="sysIfRegister1" value="是" checked> 是
    </label>
    <label class="radio-inline">
        <input type="radio" name="sysIfRegister" id="sysIfRegister2" value="否"> 否
    </label>
</div>
<div class="input-group">
    <span class="input-group-addon">是否实名</span>
    <label class="radio-inline">
        <input type="radio" name="sysIfRealName" id="sysIfRealName1" value="是" checked> 是
    </label>
    <label class="radio-inline">
        <input type="radio" name="sysIfRealName" id="sysIfRealName2" value="否"> 否
    </label>
</div>
<div class="input-group">
    <span class="input-group-addon">是否绑卡</span>
    <label class="radio-inline">
        <input type="radio" name="sysIfBindCard" id="sysIfBindCard1" value="是" checked> 是
    </label>
    <label class="radio-inline">
        <input type="radio" name="sysIfBindCard" id="sysIfBindCard2" value="否"> 否
    </label>
</div>
<div class="input-group">
    <span class="input-group-addon">是否有过交易</span>
    <label class="radio-inline">
        <input type="radio" name="sysIfTransaction" id="sysIfTransaction1" value="是" checked> 是
    </label>
    <label class="radio-inline">
        <input type="radio" name="sysIfTransaction" id="sysIfTransaction2" value="否"> 否
    </label>
</div>
